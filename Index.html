<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Criador de Anota√ß√µes</title>
  <link rel="stylesheet" href="Style.css" />
  <style>
    /* Sobrescrevendo e adicionando estilos espec√≠ficos */
    :root {
      --radius-lg: 20px;
      --radius-md: 12px;
      --radius-sm: 8px;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
    }

    .section {
      background-color: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 25px;
      margin-bottom: 30px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
      box-sizing: border-box;
      border: 2px solid transparent;
      transition: transform 0.3s ease;
    }

    /* Anima√ß√£o RGB nas bordas arredondadas */
    @keyframes rgb-border {
      0% { border-color: #ff0000; }
      20% { border-color: #ff8000; }
      40% { border-color: #ffff00; }
      60% { border-color: #00ff00; }
      80% { border-color: #0000ff; }
      100% { border-color: #ff0000; }
    }

    .section {
      animation: rgb-border 5s linear infinite;
    }

    .section h2 {
      margin: 0 0 10px 0;
      font-size: 1.5rem;
      color: var(--primary);
      border-bottom: 2px solid var(--light-gray);
      padding-bottom: 10px;
    }

    input[type="text"],
    input[type="datetime-local"],
    textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 1rem;
      background-color: var(--bg);
      color: var(--text);
      transition: all 0.3s ease;
      box-sizing: border-box;
    }

    input:focus, textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
    }

    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      padding: 10px 20px;
      background-color: var(--primary);
      border: none;
      border-radius: var(--radius-sm);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      background-color: var(--primary-hover);
      transform: translateY(-2px);
    }

    .btn-delete { background-color: var(--danger); }
    .btn-delete:hover { background-color: #dc2626; }
    
    .btn-edit { background-color: var(--accent); }
    .btn-edit:hover { background-color: #d97706; }

    .btn-move { 
      background-color: var(--gray); 
      padding: 5px 10px;
      font-size: 0.8rem;
    }

    /* Cards de tarefas */
    .card {
      background-color: var(--card-bg);
      color: var(--text);
      border-radius: var(--radius-md);
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: var(--shadow);
      border-left: 5px solid var(--primary);
      position: relative;
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: var(--shadow-hover);
      transform: scale(1.01);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .card h3 {
      margin: 0;
      font-size: 1.2rem;
      color: var(--primary);
    }

    .card-time {
      font-size: 0.85rem;
      color: var(--gray);
      background: var(--light-gray);
      padding: 2px 8px;
      border-radius: 10px;
    }

    .card p {
      margin: 10px 0;
      line-height: 1.6;
    }

    .card-actions {
      display: flex;
      gap: 8px;
      margin-top: 15px;
      border-top: 1px solid var(--border);
      padding-top: 15px;
    }

    .move-controls {
      position: absolute;
      right: 10px;
      bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    /* Alarme Ativo */
    .alarm-active {
      border-left-color: var(--accent);
      animation: pulse-alarm 2s infinite;
    }

    @keyframes pulse-alarm {
      0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
      100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
    }

    /* Modal de Edi√ß√£o */
    #editModal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
  </style>
</head>
<body class="dark-mode">

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-content">
      <a href="#" class="navbar-brand">
        <img src="https://github.com/dev-brunoliveira/Tarefas/blob/main/WhatsApp_Image_2025-04-04_at_17.39.37__1_-removebg-preview-removebg-preview.png?raw=true" alt="logo_sistema_nano">
      </a>
      <div class="navbar-actions">
        <div class="navbar-links">
          <a href="Index.html" class="active">Anota√ß√µes</a>
        </div>
        <div class="theme-toggle" id="themeToggle">
          <svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <span id="themeText">Modo Claro</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- CONTE√öDO PRINCIPAL -->
  <div class="container">
    <section class="section">
      <h2>üìù Nova Tarefa</h2>
      <input type="text" id="titulo" placeholder="T√≠tulo da Tarefa" />
      <textarea id="descricao" rows="3" placeholder="Descri√ß√£o da Tarefa"></textarea>
      <div style="display: flex; flex-direction: column; gap: 5px;">
        <label style="font-size: 0.9rem; font-weight: 600;">‚è∞ Programar Alarme (Opcional):</label>
        <input type="datetime-local" id="alarme" />
      </div>
      <button onclick="criarTarefa()">üöÄ Adicionar Tarefa</button>
    </section>

    <section class="section">
      <h2>üìã Minhas Tarefas</h2>
      <div id="tarefas"></div>
    </section>
  </div>

  <!-- MODAL DE EDI√á√ÉO -->
  <div id="editModal">
    <div class="modal-content">
      <h3>Editar Tarefa</h3>
      <input type="text" id="editTitulo" />
      <textarea id="editDescricao" rows="4"></textarea>
      <input type="datetime-local" id="editAlarme" />
      <div class="btn-group">
        <button onclick="salvarEdicao()">Salvar Altera√ß√µes</button>
        <button class="btn-delete" onclick="fecharModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <script>
    let tarefasArray = [];
    let editIndex = null;

    window.onload = () => {
      tarefasArray = JSON.parse(localStorage.getItem("tarefas")) || [];
      renderizarTarefas();
      
      // Solicitar permiss√£o de notifica√ß√£o
      if ("Notification" in window) {
        Notification.requestPermission();
      }

      // Checar alarmes a cada minuto
      setInterval(checarAlarmes, 60000);
    };

    function criarTarefa() {
      const titulo = document.getElementById('titulo').value.trim();
      const descricao = document.getElementById('descricao').value.trim();
      const alarme = document.getElementById('alarme').value;

      if (!titulo) {
        alert("O t√≠tulo √© obrigat√≥rio!");
        return;
      }

      const novaTarefa = {
        id: Date.now(),
        titulo,
        descricao,
        alarme,
        dataCriacao: new Date().toLocaleString(),
        concluida: false
      };

      tarefasArray.push(novaTarefa);
      salvarEAtualizar();
      
      document.getElementById('titulo').value = '';
      document.getElementById('descricao').value = '';
      document.getElementById('alarme').value = '';
    }

    function renderizarTarefas() {
      const container = document.getElementById('tarefas');
      container.innerHTML = '';

      tarefasArray.forEach((tarefa, index) => {
        const card = document.createElement('div');
        card.className = `card ${tarefa.alarme ? 'alarm-active' : ''}`;
        
        card.innerHTML = `
          <div class="card-header">
            <h3>${tarefa.titulo}</h3>
            <span class="card-time">${tarefa.dataCriacao}</span>
          </div>
          <p>${tarefa.descricao || 'Sem descri√ß√£o'}</p>
          ${tarefa.alarme ? `<div style="font-size: 0.8rem; color: var(--accent);">‚è∞ Alarme: ${new Date(tarefa.alarme).toLocaleString()}</div>` : ''}
          
          <div class="card-actions">
            <button class="btn-edit" onclick="abrirModal(${index})">‚úèÔ∏è Editar</button>
            <button class="btn-delete" onclick="removerTarefa(${index})">üóëÔ∏è Excluir</button>
          </div>

          <div class="move-controls">
            <button class="btn-move" onclick="moverParaTopo(${index})" title="Mover para o topo">‚¨ÜÔ∏è Topo</button>
            <button class="btn-move" onclick="moverParaBaixo(${index})" title="Mover para baixo">‚¨áÔ∏è Fundo</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function removerTarefa(index) {
      if(confirm("Deseja excluir esta tarefa?")) {
        tarefasArray.splice(index, 1);
        salvarEAtualizar();
      }
    }

    function abrirModal(index) {
      editIndex = index;
      const tarefa = tarefasArray[index];
      document.getElementById('editTitulo').value = tarefa.titulo;
      document.getElementById('editDescricao').value = tarefa.descricao;
      document.getElementById('editAlarme').value = tarefa.alarme || '';
      document.getElementById('editModal').style.display = 'flex';
    }

    function fecharModal() {
      document.getElementById('editModal').style.display = 'none';
      editIndex = null;
    }

    function salvarEdicao() {
      if (editIndex !== null) {
        tarefasArray[editIndex].titulo = document.getElementById('editTitulo').value;
        tarefasArray[editIndex].descricao = document.getElementById('editDescricao').value;
        tarefasArray[editIndex].alarme = document.getElementById('editAlarme').value;
        salvarEAtualizar();
        fecharModal();
      }
    }

    function moverParaTopo(index) {
      if (index > 0) {
        const item = tarefasArray.splice(index, 1)[0];
        tarefasArray.unshift(item);
        salvarEAtualizar();
      }
    }

    function moverParaBaixo(index) {
      if (index < tarefasArray.length - 1) {
        const item = tarefasArray.splice(index, 1)[0];
        tarefasArray.push(item);
        salvarEAtualizar();
      }
    }

    function salvarEAtualizar() {
      localStorage.setItem("tarefas", JSON.stringify(tarefasArray));
      renderizarTarefas();
    }

    function checarAlarmes() {
      const agora = new Date();
      tarefasArray.forEach(tarefa => {
        if (tarefa.alarme) {
          const dataAlarme = new Date(tarefa.alarme);
          // Se o alarme for agora (mesmo minuto)
          if (agora.getHours() === dataAlarme.getHours() && agora.getMinutes() === dataAlarme.getMinutes()) {
            dispararNotificacao(tarefa);
          }
        }
      });
    }

    function dispararNotificacao(tarefa) {
      if (Notification.permission === "granted") {
        new Notification("Lembrete de Tarefa!", {
          body: tarefa.titulo,
          icon: "Logo2.png"
        });
      } else {
        alert("‚è∞ ALARME: " + tarefa.titulo);
      }
    }

    // Tema escuro/claro (mantendo l√≥gica original melhorada)
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;

    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      document.getElementById('themeText').textContent = isDark ? 'Modo Escuro' : 'Modo Claro';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Inicializar tema
    if (localStorage.getItem('theme') === 'light') {
      body.classList.remove('dark-mode');
      document.getElementById('themeText').textContent = 'Modo Claro';
    }
  </script>
</body>
</html>
